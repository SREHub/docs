DNS获取IP策略
在域名解析过程中，通过层层解析，必将域名对应到IP(逐级授权、中间 CNAME 层层转发，此处按下不表),
对于对应到的IP,可能1个，也可能13个(不建议超过13个)，DNS会一股脑将这些IP给解析客户端(如浏览器、操作系统的解析服务)
最终的应用或系统解析服务，从中随机挑选一个(如果是定制的应用，还可以通过后续的应用层访问对获取到的IP做HA或权重)。
GSLB DNS通过GSLB IP地址库来识别来自于不同LocalDNS的请求的递归出口IP的国家+省份+ISP属性，
然后给对应的国家+地区+ISP的域名解析请求返回相应的IP，来最终实现负载均衡及就近接入。

那么客户端获取到多个IP后是怎么处理的呢？
永远选第一个？轮询？随机？
DNS服务器在收到每个请求时，都会重新（随机）排序多个IP，然后返回给客户端。
这样做的原因是负载均衡，因为客户端很可能默认选取DNS服务器返回的第一个IP来建立连接，
如果每次返回的IP顺序都一样，所有流量都跑到第一个IP上去了，失去了负载均衡的意义。
当然也有聪明的客户端会从DNS返回的IP列表中随机选取一个建立连接，但这与服务端的随机顺序并不冲突，
服务端这样做兼容了【默认选取第一个IP】的客户端。

为啥不能超过13个IP呢？
基于udp的dns报文的最大限制为512byte，在这个应答报文中包含13台DNS服务器信息，占用了511byte，没有地方再放第14台记录了，
所以究其问题的根本原因是因为协议限制。

域名解析的TTL时间依赖CNAME之后的域名的TTL时间，跟本身配置的TTL时间无关。
比如a.qq.com CNAME b.qq.com，其中a.qq.com域名设置的TTL时间为600s,b.qq.com域名设置的时间为60s。那么a.qq.com修改CNAME生效的时间为600s，
但是如果b.qq.com修改域名指向，b.qq.com和a.qq.com生效的时间是一样的，都是60s。

修改域名：

1.先查看域名当前的TTL值。
2.修改TTL值为可设定的最小值，建议为60s。
3.等待一天，保证各地的DNS服务器缓存都过期并更新了记录。
4.设置修改DNS解析到新的记录，这个时候各地的DNS就能以最快的
速度更新到最新的记录。
5.确认各地的DNS已经更新完后，再TTL值设置成常用的值（如：TTL=86400）
